{% extends "template.html" %}

    {% load staticfiles %}

{% block navigation %}
{% include "pricing/navigation.html" %}
{% endblock %}

{% block content %}
   <div class="card bg-light mx-auto" style="max-width: 30rem;">
      <div class="text-center">
        <form method="POST" class="post-form" @submit="checkForm">
          {% csrf_token %}
          <div class="card-body">
            <h4 class="card-title">{{ title }}</h4>
          </div>
          <div class="card-body">
            <div style="float:left;"><p class="card-text" >Nazwa</p></div>
            <div style="float:right;"><p class="card-text" >{{ form.name }}</p></div>
          </div>
          <div class="card-body">
            <div style="float:left;"><p class="card-text" >Cena</p></div>
            <div style="float:right;"><p class="card-text" >{{ form.project_name }}</p></div>
          </div>
          <div class="card-body">
            <div style="float:left;"><p class="card-text" >Grupa</p></div>
            <div style="float:right;"><p class="card-text" >{{ form.group }}</p></div>
          </div>
          <div class="card-body" id="element_formset">
            <dynamic-formset ref="df"
                                :form_prefix="prefix"
                                :cols="cols">
            </dynamic-formset>
          </div>
          <div class="card-body">
            <button type="submit" class="save btn btn-default">Zapisz</button>
            <button type="button" class="save btn btn-default" data-toggle="modal" data-target="#smodal">Dodaj</button>
            {% if pk is not defined %}
            <button type="button" class="save btn btn-default" onclick="delete_component({{ pk }})">Usu≈Ñ</button>
            {% endif %}
          </div>
        </form>
        <div id="search_modal">
            <modal :id="smodal">
                dafd
            </modal>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{% static 'vue/search-component.js' %}"></script>
    <script src="{% static 'vue/dynamic-formset-component.js' %}"></script>
    <script src="{% static 'vue/dynamic-table-component.js' %}"></script>
    <script src="{% static 'vue/modal-component.js' %}"></script>
    <script src="{% static 'js/edit_component.js' %}"></script>
    <script>
      {% for f in formset %}
        dform_set.$refs.df.add({'id': {{ f.id.value }}, 'name': 'asd', 'amount': {{ f.amount.value }} })
      {% endfor %}
    </script>
{% endblock %}

